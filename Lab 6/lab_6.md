**Рефакторинг для покращення архітектури коду: інноваційні рішення**

У першому завданні:

Дві функції `calculate_total_price` та `calculate_total_price_with_tax` містили дублюючий код для обчислення загальної ціни з або без знижки. Щоб позбутися дублювання, ці функції були об'єднані в одну, яка тепер приймає додатковий параметр `tax_rate`. Це дозволяє обчислювати загальну ціну з урахуванням як знижки, так і податку. 

Крім того, використання генератора списку та функції `sum` значно спростило код. Генератор списку обчислює ціну для кожного продукту, застосовуючи знижку за потреби, а функція `sum` підсумовує ці ціни. Після цього результат множиться на (1 + `tax_rate`), щоб врахувати податок. Це не лише покращує читабельність коду, але й робить його більш ефективним та легким для підтримки.

У другому завданні:

Клас `DataAnalyzer` містив дублювання коду в методах `calculate_total` та `calculate_average`. Обидва методи викликали приватну функцію `_calculate_total_and_count` для обчислення суми та кількості елементів у даних. Щоб усунути дублювання, методи `calculate_total` та `calculate_average` були змінені так, щоб безпосередньо використовувати результат `_calculate_total_and_count`. Тепер `calculate_total` просто повертає першу частину результату (суму), а `calculate_average` ділить цю суму на кількість елементів, якщо вона не дорівнює нулю. 

Ці зміни не тільки усувають дублювання, але й роблять код більш логічним і зрозумілим. Обидва методи тепер покладаються на єдину логіку для обчислення суми та кількості, що знижує ймовірність помилок та спрощує підтримку.

Цей підхід значно покращує загальну архітектуру системи, підвищуючи її гнучкість і масштабованість. Використання генераторів списків та функцій вищого порядку, таких як `sum`, робить код більш ефективним і легко читабельним, а усунення дублювання сприяє зниженню ймовірності помилок та спрощенню майбутніх змін і доповнень.