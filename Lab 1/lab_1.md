Метод calculate_total_cost наразі містить занадто багато логіки, адже виконує наступні завдання:
- обчислення вартості кожного елемента замовлення;
- застосування знижок;
- застосування націнок для термінових замовлень та замовлень для постійних клієнтів.

Цей метод порушує принцип єдиної відповідальності, оскільки виконує надмірну кількість різнопланових дій. Щоб покращити цей метод, можна застосувати техніку рефакторингу "Виділення окремих методів". Це передбачає створення окремих методів для обчислення вартості елементів замовлення, застосування знижок та націнок, що дозволить спростити код та зробити його більш модульним.

Після проведеного рефакторингу код став значно більш зрозумілим та легшим для тестування і підтримки. Кожна нова функція відповідає за свою вузьку ділянку роботи, що значно полегшує розуміння загальної логіки та можливі майбутні зміни. Тепер метод calculate_total_cost відповідає лише за координацію роботи інших методів, що робить його більш читабельним та зрозумілим.